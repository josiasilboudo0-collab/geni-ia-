<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geni AI Studio - Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom": "https://esm.sh/react-dom@18.2.0/client",
        "@google/genai": "https://esm.sh/@google/genai",
        "lucide-react": "https://esm.sh/lucide-react"
      }
    }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 min-h-screen">
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom';
        import { GoogleGenerativeAI } from "@google/genai";

        function App() {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState("");
            const [loading, setLoading] = useState(false);
            const [isDark, setIsDark] = useState(true);

            useEffect(() => {
                document.documentElement.classList.toggle('dark', isDark);
            }, [isDark]);

            const handleSend = async () => {
                if (!input.trim()) return;

                const newMessages = [...messages, { role: 'user', text: input }];
                setMessages(newMessages);
                setInput("");
                setLoading(true);

                try {
                    // Remplacez par votre clÃ© ou utilisez une variable d'environnement Vercel
                    const genAI = new GoogleGenerativeAI("VOTRE_CLE_API_GEMINI");
                    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

                    const result = await model.generateContent(input);
                    const response = await result.response;
                    setMessages([...newMessages, { role: 'ai', text: response.text() }]);
                } catch (error) {
                    setMessages([...newMessages, { role: 'ai', text: "Erreur : VÃ©rifiez votre clÃ© API Gemini." }]);
                } finally {
                    setLoading(false);
                }
            };

            return React.createElement('div', { className: 'max-w-4xl mx-auto min-h-screen flex flex-col p-4' },
                // Header
                React.createElement('header', { className: 'flex justify-between items-center py-6 border-b dark:border-slate-800' },
                    React.createElement('h1', { className: 'text-2xl font-black tracking-tighter bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent' }, 'GENI AI STUDIO'),
                    React.createElement('button', { 
                        onClick: () => setIsDark(!isDark),
                        className: 'p-2 rounded-full bg-slate-200 dark:bg-slate-800'
                    }, isDark ? 'ðŸŒ™' : 'â˜€ï¸')
                ),

                // Chat
                React.createElement('div', { className: 'flex-1 overflow-y-auto py-8 space-y-6' },
                    messages.length === 0 && React.createElement('div', { className: 'text-center opacity-50 mt-20' }, 'Posez n\'importe quelle question Ã  l\'IA...'),
                    messages.map((msg, i) => React.createElement('div', { 
                        key: i,
                        className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`
                    }, 
                        React.createElement('div', { 
                            className: `max-w-[80%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-blue-600 text-white' : 'bg-slate-200 dark:bg-slate-800'}`
                        }, msg.text)
                    )),
                    loading && React.createElement('div', { className: 'text-blue-500 animate-pulse' }, 'Geni rÃ©flÃ©chit...')
                ),

                // Input
                React.createElement('div', { className: 'pb-8' },
                    React.createElement('div', { className: 'relative' },
                        React.createElement('input', {
                            type: 'text',
                            value: input,
                            onChange: (e) => setInput(e.target.value),
                            onKeyDown: (e) => e.key === 'Enter' && handleSend(),
                            placeholder: 'Demandez n\'importe quoi...',
                            className: 'w-full p-5 pr-16 rounded-2xl border-2 border-transparent bg-white dark:bg-slate-900 shadow-xl focus:border-blue-500 outline-none transition-all'
                        }),
                        React.createElement('button', {
                            onClick: handleSend,
                            className: 'absolute right-3 top-3 bottom-3 px-4 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition'
                        }, 'GO')
                    )
                )
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
