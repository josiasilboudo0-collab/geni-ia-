<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geni AI Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom": "https://esm.sh/react-dom@18.2.0",
        "@google/genai": "https://esm.sh/@google/genai"
      }
    }
    </script>
</head>
<body class="bg-slate-900 text-white">
    <div id="root">
        <div class="flex items-center justify-center h-screen">
            <p class="animate-pulse text-xl">Chargement de Geni AI Studio...</p>
        </div>
    </div>

    <script type="module">
        import React from 'react';
        import ReactDOM from 'react-dom';
        import { GoogleGenerativeAI } from "@google/genai";

        const { useState, useEffect } = React;

        function App() {
            const [input, setInput] = useState("");
            const [messages, setMessages] = useState([]);
            const [loading, setLoading] = useState(false);

            const askAI = async () => {
                if(!input.trim()) return;
                const newMsgs = [...messages, { role: 'user', text: input }];
                setMessages(newMsgs);
                setLoading(true);
                setInput("");

                try {
                    // Mettez votre clé ici ou utilisez une variable d'environnement
                    const genAI = new GoogleGenerativeAI("VOTRE_CLE_API");
                    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                    const result = await model.generateContent(input);
                    const response = await result.response;
                    setMessages([...newMsgs, { role: 'ai', text: response.text() }]);
                } catch (e) {
                    setMessages([...newMsgs, { role: 'ai', text: "Erreur de connexion à l'IA." }]);
                } finally { setLoading(false); }
            };

            return React.createElement('div', { className: 'max-w-2xl mx-auto p-6 flex flex-col h-screen' },
                React.createElement('h1', { className: 'text-3xl font-bold mb-8 text-blue-400' }, 'GENI AI STUDIO'),
                React.createElement('div', { className: 'flex-1 overflow-y-auto space-y-4 mb-4' },
                    messages.map((m, i) => React.createElement('div', { 
                        key: i, 
                        className: `p-4 rounded-lg ${m.role === 'user' ? 'bg-blue-600 ml-auto' : 'bg-slate-800 mr-auto'} max-w-[80%]`
                    }, m.text)),
                    loading && React.createElement('div', { className: 'text-gray-400' }, 'Geni réfléchit...')
                ),
                React.createElement('div', { className: 'flex gap-2' },
                    React.createElement('input', {
                        className: 'flex-1 p-3 rounded bg-slate-800 border border-slate-700 outline-none',
                        value: input,
                        onChange: (e) => setInput(e.target.value),
                        onKeyDown: (e) => e.key === 'Enter' && askAI(),
                        placeholder: 'Posez une question...'
                    }),
                    React.createElement('button', { 
                        className: 'bg-blue-600 px-6 py-3 rounded font-bold',
                        onClick: askAI 
                    }, 'OK')
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
