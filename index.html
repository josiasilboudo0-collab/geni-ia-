<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geni AI Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: sans-serif; }
        .chat-container { height: calc(100vh - 160px); }
    </script>
</head>
<body>
    <div id="root">
        <div class="flex items-center justify-center h-screen">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 mb-4 mx-auto"></div>
                <p class="text-blue-400">Initialisation de Geni AI...</p>
            </div>
        </div>
    </div>

    <script type="module">
        import React from 'https://esm.sh/react@18.2.0';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
        import { GoogleGenerativeAI } from "https://esm.sh/@google/genai";

        const { useState } = React;

        function App() {
            const [input, setInput] = useState("");
            const [messages, setMessages] = useState([]);
            const [loading, setLoading] = useState(false);

            const askAI = async () => {
                if(!input.trim() || loading) return;
                
                const userMsg = { role: 'user', text: input };
                setMessages(prev => [...prev, userMsg]);
                setLoading(true);
                const currentInput = input;
                setInput("");

                try {
                    // REMPLACEZ ICI PAR VOTRE CLÉ GEMINI
                    const genAI = new GoogleGenerativeAI("VOTRE_CLÉ_ICI");
                    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                    
                    const result = await model.generateContent(currentInput);
                    const response = await result.response;
                    const text = response.text();
                    
                    setMessages(prev => [...prev, { role: 'ai', text }]);
                } catch (e) {
                    console.error(e);
                    setMessages(prev => [...prev, { role: 'ai', text: "Désolé, j'ai rencontré une erreur de connexion." }]);
                } finally {
                    setLoading(false);
                }
            };

            return React.createElement('div', { className: 'max-w-3xl mx-auto p-4 flex flex-col h-screen' },
                React.createElement('header', { className: 'py-4 border-b border-slate-800 mb-4' },
                    React.createElement('h1', { className: 'text-2xl font-bold text-blue-500' }, 'GENI AI STUDIO')
                ),
                React.createElement('div', { className: 'chat-container overflow-y-auto space-y-4 mb-4 p-2' },
                    messages.length === 0 && React.createElement('p', {className: 'text-slate-500 text-center mt-10'}, 'Bienvenue ! Posez votre première question.'),
                    messages.map((m, i) => React.createElement('div', { 
                        key: i, 
                        className: `p-4 rounded-2xl ${m.role === 'user' ? 'bg-blue-600 ml-auto' : 'bg-slate-800 mr-auto'} max-w-[85%]`
                    }, m.text)),
                    loading && React.createElement('div', { className: 'text-blue-400 animate-pulse' }, 'Geni réfléchit...')
                ),
                React.createElement('div', { className: 'flex gap-2 bg-slate-900 p-2' },
                    React.createElement('input', {
                        className: 'flex-1 p-4 rounded-xl bg-slate-800 border border-slate-700 outline-none focus:border-blue-500',
                        value: input,
                        onChange: (e) => setInput(e.target.value),
                        onKeyDown: (e) => e.key === 'Enter' && askAI(),
                        placeholder: 'Écrivez votre message...'
                    }),
                    React.createElement('button', { 
                        className: 'bg-blue-600 hover:bg-blue-700 px-6 py-4 rounded-xl font-bold transition-colors',
                        onClick: askAI 
                    }, 'Envoyer')
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
